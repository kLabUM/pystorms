

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>⛈ ⛈ Welcome to the pystorms ⛈ ⛈ &mdash; pystorms 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Scenarios" href="Scenarios.html" />
    <link rel="prev" title="Welcome to pystorms documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pystorms
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">⛈ ⛈ Welcome to the <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> ⛈ ⛈</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#smart-stormwater-systems">Smart Stormwater Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-pystorms">What is pystorms?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#citation">Citation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#research-using-pystorms">Research using pystorms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Scenarios:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Scenarios.html">Scenarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="ScenarioTheta.html">Scenario Theta</a></li>
<li class="toctree-l1"><a class="reference internal" href="ScenarioAlpha.html">Scenario Alpha</a></li>
<li class="toctree-l1"><a class="reference internal" href="ScenarioBeta.html">Scenario Beta</a></li>
<li class="toctree-l1"><a class="reference internal" href="ScenarioGamma.html">Scenario Gamma</a></li>
<li class="toctree-l1"><a class="reference internal" href="ScenarioDelta.html">Scenario Delta</a></li>
<li class="toctree-l1"><a class="reference internal" href="ScenarioEpsilon.html">Scenario Epsilon</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="StateVectors.html">Defining States</a></li>
<li class="toctree-l1"><a class="reference internal" href="PyswmmFeatures.html"><code class="docutils literal notranslate"><span class="pre">pyswmm</span></code> functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="BuildingScenarios.html">Building Custom Scenarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Multiprocessing.html">Multi-processing</a></li>
</ul>
<p class="caption"><span class="caption-text">Development:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Development</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pystorms</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>⛈ ⛈ Welcome to the <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> ⛈ ⛈</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Home.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cloud-with-lightning-and-rain-cloud-with-lightning-and-rain-welcome-to-the-pystorms-cloud-with-lightning-and-rain-cloud-with-lightning-and-rain">
<h1>⛈ ⛈ Welcome to the <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> ⛈ ⛈<a class="headerlink" href="#cloud-with-lightning-and-rain-cloud-with-lightning-and-rain-welcome-to-the-pystorms-cloud-with-lightning-and-rain-cloud-with-lightning-and-rain" title="Permalink to this headline">¶</a></h1>
<div class="section" id="smart-stormwater-systems">
<h2>Smart Stormwater Systems<a class="headerlink" href="#smart-stormwater-systems" title="Permalink to this headline">¶</a></h2>
<p>Flooding is the leading cause of “natural disaster’’ deaths worldwide.
Simultaneously, untold quantities of metals, bacteria, nutrients, and other pollutants are washing-off during storms into our streams and rivers.
As a result, many parts of the world are dealing with chronically impaired coastlines due to algal blooms and other ecological disasters.
Many of these challenges are presently addressed through classic approaches and new infrastructure construction (larger pipes, bigger basins, storage tanks, etc.).</p>
<p>Instead of building more, there is now an unprecedented opportunity to use internet-of-things and cyber-physical technologies to embed water systems with intelligence.
The Internet-connected water systems of the future will control themselves (gates, valves, pumps), similar to self-driving cars, to reduce flooding and improve water quality.
However, there is a dire need for more researchers to help enable the next generation of data and control algorithms for smart water systems.</p>
</div>
<div class="section" id="what-is-pystorms">
<h2>What is pystorms?<a class="headerlink" href="#what-is-pystorms" title="Permalink to this headline">¶</a></h2>
<p>We developed <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> as a tool to collaboratively develop new algorithms for solving urban watershed specific control problems. In particular, we built this tool to bridge the gap between (i) experts in algorithms and control systems and (ii) experts in urban water systems (as well as anyone in between).</p>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> is an easy-to-use, open-source Python library to allow quick evaluation of control strategies on a set of real world-inspired smart stormwater scenarios. It includes (1) a collection of real-world inspired stormwater networks and (2) a streamlined programming interface to analyze performance of control algorithms on the included networks. The library has been written so that it can be easily adapted and used with other stormwater networks or simulators, while maintaining the focus on the control algorithm itself.</p>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> is built on <a class="reference external" href="https://github.com/OpenWaterAnalytics/pyswmm">pyswmm</a>, which is a Python wrapper developed to interface with the United State’s Environmental Protection Agency Storm Water Management Model <a class="reference external" href="https://www.epa.gov/water-research/storm-water-management-model-swmm">EPA-SWMM</a>, thus allowing users to bypass the need for utilizing the EPA-SWMM GUI (available only on Windows operating systems) or compiling the EPA-SWMM source code for usage.</p>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> is developed by Open-Storm, the open-source outreach efforts of a consortium of university researchers, industry experts, and municipal practitioners, and lead by the <a class="reference external" href="http://www-personal.umich.edu/~bkerkez/">Real-Time Water Systems Lab</a> at the University of Michigan.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This package is built in python 3.7 and is supported on all operating systems (Windows, Mac OS, Linux).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install pystorms
</pre></div>
</div>
<p>Before installation, we encourage users to consider setting up their Python environments using the <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> package for better management and organization of Python packages and libraries. Details on this package can be viewed <a class="reference external" href="https://pypi.org/project/virtualenv/">here</a> and <a class="reference external" href="https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/">here</a>, with an additional tool called <code class="docutils literal notranslate"><span class="pre">virtualenvwrapper</span></code> available <a class="reference external" href="https://pypi.org/project/virtualenvwrapper/">here</a>.</p>
<p>If you run into any issues installing the package, please refer to the advanced section for additional installation instructions or feel free to contact us.</p>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>All necessary dependencies for the <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> package should be installed via the <code class="docutils literal notranslate"><span class="pre">pip</span></code> package installer. To ensure <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> has been installed successfully–while also providing the basics for use of <code class="docutils literal notranslate"><span class="pre">pystorms</span></code>–, the following code snippet can be run, with details of its components provided below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pystorms</span>

<span class="c1"># (3) Define the control algorithm</span>
<span class="k">def</span> <span class="nf">controller</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
     <span class="n">actions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
     <span class="k">if</span> <span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
             <span class="n">actions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
     <span class="k">if</span> <span class="n">state</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
             <span class="n">actions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
     <span class="k">return</span> <span class="n">actions</span>

<span class="c1"># (1) Call and define the scenario</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">pystorms</span><span class="o">.</span><span class="n">scenarios</span><span class="o">.</span><span class="n">theta</span><span class="p">()</span>

<span class="c1"># (2) Run the simulation</span>
<span class="n">done</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
    <span class="n">actions</span> <span class="o">=</span> <span class="n">controller</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
    <span class="n">done</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
</pre></div>
</div>
<p>We break the above code snippet into three parts:</p>
<ol class="arabic simple">
<li><p>Define a scenario</p></li>
</ol>
<blockquote>
<div><p>To run a stormwater control simulation using <code class="docutils literal notranslate"><span class="pre">pystorms</span></code>, a <strong>scenario</strong> must first be defined. <strong>Scenarios are the fundamental components of the pystorms library</strong>, and each consist of (i) a stormwater network, (ii) a driving precipitation event, and (iii) a control objective.</p>
<p>As seen in the code above, a scenario is called by defining a class (e.g. <code class="code docutils literal notranslate"><span class="pre">env</span></code>) that initializes the default simulation modules specific for the corresponding scenario. In the code above, the corresponding scenario is <em>theta</em>, which is a basic stormwater control scenario developed specifically for testing and debugging of new code and/or control algorithms in <code class="code docutils literal notranslate"><span class="pre">pystorms</span></code>.</p>
<p>For the example above, the scenario class is defined using the default precipitation event and control objective of the theta scenario; it is defined fully by the following line of code: <code class="code docutils literal notranslate"><span class="pre">env</span> <span class="pre">=</span> <span class="pre">pystorms.scenarios.theta()</span></code>).</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Delineate a simulation</p></li>
</ol>
<blockquote>
<div><p>A <strong>simulation</strong> for the scenario is then delineated using the method calls of the scenario class (i.e. <code class="code docutils literal notranslate"><span class="pre">env</span></code> in this example). For <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> the method calls of the scenario class were defined to follow the typical actions that occur in-situ for <em>actual</em> control systems. Namely, there are two specific components: (i) querying the state of the system, and (ii) implementing control actions based on the system’s state.</p>
<blockquote>
<div><ol class="lowerroman simple">
<li><p>States in the stormwater network (e.g. water levels, flows, pollutant concentrations) can be queried at any point of the simulation using the <code class="code docutils literal notranslate"><span class="pre">env.state()</span></code> method.</p></li>
<li><p>Control actions can be implemented in the network, and the simulation can be progressed forward for a specified time-step using the <code class="code docutils literal notranslate"><span class="pre">env.step(&lt;your</span> <span class="pre">actions</span> <span class="pre">here&gt;)</span></code> call. Please refer to the scenarios section for more information.</p></li>
</ol>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Implementing the control algorithm</p></li>
</ol>
<blockquote>
<div><p>The simulation set up in this way eases the ability to explicitly segregate the <strong>control algorithm</strong> that determines what control actions are to be implemented. By separating out the control algorithm in this way, the user is able to focus on testing various control strategies and their computational implementation via their algorithms.</p>
<p>As can be seen by the case provided here, the control algorithm is such that all settings corresponding to the control assets are set to <code class="docutils literal notranslate"><span class="pre">1.0</span></code> (the proportional equivalent of <code class="docutils literal notranslate"><span class="pre">100%</span></code>). If the states at either of the state locations read greater than <code class="docutils literal notranslate"><span class="pre">0.5</span></code>, then the corresponding control asset setting is changed to <code class="docutils literal notranslate"><span class="pre">0.5</span></code>. (The details of what physical parameters the state and control setting values correspond to are discussed in the Scenario Theta section).</p>
<p>We refer to the case when no control is implemented as the <strong>uncontrolled case</strong>. To run the uncontrolled case, simply progress the simulation without defining any actions in the step call (i.e. <code class="code docutils literal notranslate"><span class="pre">env.step()</span></code>).</p>
</div></blockquote>
</div>
<div class="section" id="citation">
<h2>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">¶</a></h2>
<p>While <code class="docutils literal notranslate"><span class="pre">pystorms</span></code> can be used freely, we ask that the origins of this tool be credited by using the following reference:</p>
<div class="highlight-latex notranslate"><div class="highlight"><pre><span></span>@inproceedings<span class="nb">{</span>10.1145/3302509.3313336,
author = <span class="nb">{</span>Rimer, Sara P. and Mullapudi, Abhiram and Troutman, Sara C. and Kerkez, Branko<span class="nb">}</span>,
title = <span class="nb">{</span>A Benchmarking Framework for Control and Optimization of Smart Stormwater Networks: Demo Abstract<span class="nb">}</span>,
year = <span class="nb">{</span>2019<span class="nb">}</span>,
isbn = <span class="nb">{</span>9781450362856<span class="nb">}</span>,
publisher = <span class="nb">{</span>Association for Computing Machinery<span class="nb">}</span>,
address = <span class="nb">{</span>New York, NY, USA<span class="nb">}</span>,
url = <span class="nb">{</span>https://doi-org.proxy.lib.umich.edu/10.1145/3302509.3313336<span class="nb">}</span>,
doi = <span class="nb">{</span>10.1145/3302509.3313336<span class="nb">}</span>,
booktitle = <span class="nb">{</span>Proceedings of the 10th ACM/IEEE International Conference on Cyber-Physical Systems<span class="nb">}</span>,
pages = <span class="nb">{</span>350–351<span class="nb">}</span>,
numpages = <span class="nb">{</span>2<span class="nb">}</span>,
keywords = <span class="nb">{</span>real-time control, water infrastructure, smart cities<span class="nb">}</span>,
location = <span class="nb">{</span>Montreal, Quebec, Canada<span class="nb">}</span>,
series = <span class="nb">{</span>ICCPS ’19<span class="nb">}</span>
<span class="nb">}</span>
</pre></div>
</div>
</div>
<div class="section" id="research-using-pystorms">
<h2>Research using pystorms<a class="headerlink" href="#research-using-pystorms" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Sara C. Troutman, Nancy G. Love, and Branko Kerkez. Balancing water quality and flows incombined sewer systems using real-time control. <em>Environ. Sci.: Water Res. Technol</em> (2020)</p></li>
</ol>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pystorms</span></code> is licensed under a GNU General Public License.</p>
<a class="reference internal image-reference" href="_images/gplv3-or-later.svg"><div align="left" class="align-left"><img alt="_images/gplv3-or-later.svg" src="_images/gplv3-or-later.svg" width="100" /></div>
</a>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Scenarios.html" class="btn btn-neutral float-right" title="Scenarios" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to pystorms documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2049

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>